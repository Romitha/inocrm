- request_spare_part_id = (params[:request_spare_part_id] or session[:request_spare_part_id])
- spare_part = TicketSparePart.find request_spare_part_id
- ticket_for_sp = spare_part.ticket
.row
  .col-md-4
    %strong Activity: #{spare_part.ticket_spare_part_manufacture.try(:received_manufacture) ? "Issue part" : "Recieve part"}
.row{style: "margin-top:5px;"}
  .col-md-12
    %strong Part Status:
    #{spare_part.spare_part_status_action.name}
.row
  .col-md-4
    %strong Spare Part No:
    #{spare_part.spare_part_no}
  .col-md-4
    %strong Product Brand:
    HP

.row
  .col-md-4
    %strong Part Description:
    #{spare_part.spare_part_description}
  .col-md-4
    %strong Faulty Serial No:
    #{spare_part.faulty_serial_no}
  .col-md-4
    %strong Faulty CT No:
    #{spare_part.faulty_ct_no}

.row{style: "margin-top:10px;"}
  .col-md-4
    %strong Order No:
    #{spare_part.ticket_spare_part_manufacture.try(:order_no)}
  .col-md-4
    %strong Event No:
    #{spare_part.ticket_spare_part_manufacture.try(:event_no)}

.row
  = simple_nested_form_for spare_part, url: update_received_and_issued_tickets_path, method: :post do |f|

    = hidden_field_tag :process_id, session[:process_id]
    = hidden_field_tag :task_id, session[:task_id]
    = hidden_field_tag :owner, session[:owner]
    - session[:bpm_input_variables].each do |bpm_input_variable|
      = hidden_field_tag bpm_input_variable[0], bpm_input_variable[1]

    = f.input :received_part_serial_no, wrapper_html: {class: "col-md-6"}
    = f.input :received_part_ct_no, wrapper_html: {class: "col-md-6"}
    = f.input :note, wrapper_html: {class: "col-md-12"}, input_html: {value: nil}
    .col-md-12= simple_format f.object.note
    %div{title: "#{'Part not yet collected' unless spare_part.ticket_spare_part_manufacture.try(:collected_manufacture)}"}= f.submit "Save", class: "btn btn-success", disabled: !spare_part.ticket_spare_part_manufacture.try(:collected_manufacture)