- srn = @srn
.row
  .col-md-12
    = panels panel_type: "success", header_content: "SRN No: #{srn.srn_no}" do

      %h4 SRN Info
      %dl.dl-horizontal
        %dt SRN No
        %dd= srn.formatted_srn_no
        %dt Sales Order No
        %dd= srn.so_no
        %dt Requested Module
        %dd= srn.requested_module.name
        %dt SRN Date
        %dd= srn.created_at.try(:strftime, INOCRM_CONFIG["short_date_format"])
        %dt Remarks
        %dd= simple_format srn.remarks
        %dt Created at
        %dd= srn.created_at.try(:strftime, INOCRM_CONFIG["short_date_format"])
        %dt Created by
        %dd= srn.created_by_user.full_name
        %dt SO Customer
        %dd= srn.so_customer_name

      %h4.small_scale_padding-top1 SRN Items
      %table.table.table-bordered
        %thead
          %tr
            %th{colspan: 1}
            %th{colspan: 4} Product
            %th{colspan: 3} SRN item
          %tr
            %th
            %th Item Code
            %th Description
            %th Product no
            %th Model no
            %th PRN (s)
            %th Quantity
            %th Remarks
        %tbody
          - srn.srn_items.each_with_index do |srn_item, index|
            %tr
              %td= (index+1)
              %td= srn_item.inventory_product.try(:generated_item_code)
              %td= srn_item.inventory_product.try(:description)
              %td= srn_item.inventory_product.try(:product_no)
              %td= srn_item.inventory_product.try(:model_no)
              %td= srn_item.inventory_prn_items.map{|prn_item| prn_item.inventory_prn.formated_prn_no}.uniq.join(", ")
              %td= srn_item.quantity
              %td= srn_item.remarks

= link_to "Issue", gin_admins_inventories_path(gin_callback: "select_srn", srn_id: srn.id, from: "srn_page"), remote: true, class: "btn btn-sm btn-primary"

#gin_wrapper