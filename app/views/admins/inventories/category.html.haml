%h3 Inventory Category
= simple_nested_form_for @inventory_category, url: category_admins_inventories_path, method: :post, html: {class: "validate_form"} do |c1|
  = c1.input :created_by,  as: :hidden, input_html: {value: current_user.id}
  = hidden_field_tag :inventory_category3_id, c1.object.id
  .row

    .col-md-3.brand
      .form-group
        = label_tag InventoryCategoryCaption.first.caption
        = select_tag "search_inventory[brand]", options_from_collection_for_select(InventoryCategory1.all, :id, :name, (params[:search_inventory] and params[:search_inventory][:brand])), include_blank: true, class: "form-control parent_class", data: {child_select_class: "category2_id"}

      - if c1.object.inventory_category2
        %strong Brand:
        = c1.object.inventory_category2.inventory_category1.name
    .col-md-3
      = c1.input :category2_id, collection: InventoryCategory1.all, as: :grouped_select, group_method: :inventory_category2s, group_label_method: :id, input_html: {class: "category2_id", required: true}, label: "Product"
      - if c1.object.inventory_category2
        %strong Product:
        = c1.object.inventory_category2.name
    .col-md-3
      = c1.input :code, label: "Category Code", input_html: {required: true}
      - if c1
        %strong Category Code:
        = c1.object.code
    .col-md-3
      = c1.input :name, label: "Category Name", input_html: {required: true}
      - if c1
        %strong Category Name:
        = c1.object.name

  .row
    .col-md-12
      = c1.submit "Save", class: "btn btn-success", id: "submit_new_inventory_category", name: "#{params[:edit_more] ? 'update' : 'create'}"

%hr
= collapse_wrapper collapse_id: "category", labelledby: "labelledby" do
  - @inventory_category_all.each do |inventory_category|
    = collapse collapse_type: "success", labelledby: "labelledby_#{inventory_category.id}", header_content: inventory_category.name, collapse_link: "link_#{inventory_category.id}", collapse_id: "category category " do
      .row
        .col-md-4
          %strong Product:
          = inventory_category.inventory_category2.name
          / = link_to "#", class: "inline_edit", data: {type: "select", resource: "inventory_category3", source: InventoryCategory2.all.collect{|category2| {value: category2.id, text: category2.name}}, name: "category2_id", url: category_admins_inventories_path(edit: true, inventory_category3_id: inventory_category.id), "original-title" => "Update Product Category"} do
          /   = inventory_category.inventory_category2.name
        .col-md-4
          %strong Category Code:
          = link_to "#", class: "inline_edit", data: {type: "text", resource: "inventory_category3", name: "code", url: category_admins_inventories_path(edit: true, inventory_category3_id: inventory_category.id), "original-title" => "Update Product Category"} do
            = inventory_category.code
        .col-md-4
          %strong Category Name:
          = link_to "#", class: "inline_edit", data: {type: "text", resource: "inventory_category3", name: "name", url: category_admins_inventories_path(edit: true, inventory_category3_id: inventory_category.id), "original-title" => "Update Product Category"} do
            = inventory_category.name


      = link_to "Edit more", category_admins_inventories_path(edit_more: true, inventory_category3_id: inventory_category.id)